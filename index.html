<!DOCTYPE html>
<html>
<head>
    <title>Attendance Guardian</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: sans-serif; text-align: center; padding: 20px; background: #f4f4f9; }
        .card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        h1 { color: #3498db; }
        .stat { font-size: 24px; font-weight: bold; margin: 10px 0; }
        button { padding: 10px 20px; font-size: 18px; cursor: pointer; border-radius: 5px; border: none; }
        .btn-p { background: #2ecc71; color: white; }
        .btn-a { background: #e74c3c; color: white; margin-left: 10px; }
        .advice { margin-top: 20px; color: #555; font-style: italic; }
        .btn-r { background: #95a5a6; color: white; margin-top: 15px; display: block; width: 100%; }
    </style>
</head>
<body>

    <div class="card">
        <h1>My Attendance</h1>
        <div id="percentage" class="stat">0%</div>
        <p>Attended: <span id="att">183</span> | Total: <span id="total">339</span></p>
        
        <button class="btn-p" onclick="add(true)">Present (+)</button>
        <button class="btn-a" onclick="add(false)">Absent (-)</button>
        <button class="btn-r" onclick="resetData()">Reset Data</button>

        <div id="status" class="advice">Loading advice...</div>
    </div>

    <script>
    // 1. Load data from memory, or use default if empty
    let attended = parseInt(localStorage.getItem('att')) || 183;
    let conducted = parseInt(localStorage.getItem('total')) || 339;

    function updateUI() {
        let per = (attended / conducted * 100).toFixed(2);
        document.getElementById('percentage').innerText = per + "%";
        document.getElementById('att').innerText = attended;
        document.getElementById('total').innerText = conducted;

        // Save the new numbers to memory
        localStorage.setItem('att', attended);
        localStorage.setItem('total', conducted);

        let advice = "";
        if (per < 75) {
            let need = Math.ceil((0.75 * conducted - attended) / 0.25);
            advice = "⚠️ You must attend " + need + " more classes to hit 75%.";
        } else {
            let skip = Math.floor((attended - 0.75 * conducted) / 0.75);
            advice = "✅ You are safe! You can skip " + skip + " classes.";
        }
        document.getElementById('status').innerText = advice;
    }

    function add(isPresent) {
        conducted++;
        if (isPresent) attended++;
        updateUI();
    }

    updateUI();
    function resetData() {
    if (confirm("Are you sure? This will delete all your attendance data.")) {
        localStorage.clear(); // This wipes the memory
        location.reload();    // This refreshes the page to show default values
    }
}
</script>
</body>
</html>
